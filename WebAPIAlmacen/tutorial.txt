Crear proyecto

Elegir plantilla de proyecto Webapi, dar un nombre al proyecto y dejar las opciones por defecto.
Eliminar el archivo WeatherForecast.cs y el controller WeatherForecastController

Crear la base de datos MiAlmacen con estos scripts
CREATE TABLE Familias (
  Id              INT           NOT NULL    IDENTITY    PRIMARY KEY,
  Nombre           NVARCHAR(100)  NOT NULL
);

CREATE TABLE Productos (
    Id              INT           NOT NULL    IDENTITY    PRIMARY KEY,
    Nombre        NVARCHAR (150) NOT NULL,
    Precio        DECIMAL (9, 2) NOT NULL,
    FechaAlta     DATE           NULL,
    Descatalogado BIT            NOT NULL,
    FotoURL       NVARCHAR (MAX) NULL,
    FamiliaId     INT            NOT NULL,
    CONSTRAINT FK_Familias_Productos FOREIGN KEY (FamiliaId) REFERENCES Familias (Id)
);

Agregar los paquetes necesarios a la aplicación desde Herramientas, Administrador de paquetes Nuget.
Instalar estos paquetes:
Microsoft.EntityFrameworkCore.SqlServer 
Microsoft.EntityFrameworkCore.Tools 

-----------------------------------------------------------------------------------------------------------
Crear los modelos mediante Scaffold
Ejecutar el siguiente comando desde la consola de paquetes Nuget
Scaffold-DbContext "Data Source=localhost;Initial Catalog=MiAlmacen;Integrated Security=True;TrustServerCertificate=true" -Provider Microsoft.EntityFrameworkCore.SqlServer -OutputDir Models -force -project WebAPIAlmacen

Debemos sustituir el valor de Data Source por la configuración de nuestro servidor
Al ejecutarse el comando se crea la carpeta Models con los modelos de datos y MiAlmacenContext con la configuración y estructura de la base de datos
-----------------------------------------------------------------------------------------------------------
Crear controller de Familias

En el archivo appsettings.development.json ponemos la cadena de conexión de la base de datos
En el program registramos la conexión leyendo la cadena de conexión anterior y creando un context que pueda inyectarse
en otras clases, normalmente controllers y/o servicios
Creamos el controller de familias en la carpeta controller. Es MUY IMPORTANTE que cada controller tenga el sufijo controller
En cada controller, inyectamos como dependencia el context (MiAlmacenContext) para poder utilizar la base de datos
-----------------------------------------------------------------------------------------------------------
Desarrollar controller de Familias

Cada punto de acceso del controller:
    Es un método debe ir precedido de el tipo de petición (Get, Post, Put o Delete habitualmente)
    Debe ser asíncrono async Task y preferiblemete devolver un ActionResult para, además de la información, devolver el código de retorno,
    por ejemplo, un Ok 200 cuando va todo bien o un Bad Request 400 cuando hay algún fallo
    Al ser asíncrono, cada operación del context debe precederse por un await e incluir un método que contenga Async
    Cada uno de los puntos de acceso debe tener una ruta diferente (por ejemplo, no puede haber dos [HttpGet], el segundo incluiría una ruta)
    También puede haber argumentos. Estos argumentos son los que el punto de acceso necesitará para programar su lógica
    Estos argumentos van entre paréntesis junto al nombre del método y deben coincidir en su nombre con los argumentos expuestos en la ruta
    Por defecto, los argumentos se toman de la ruta ([FromRoute]). Si viene con sintaxis querystring van con [FromQuery] y si
    vienen con archivos con [FromForm]

    Opcionalmente, podemos tener en cuenta ajustar el tracking en la aplicación. Para ello, en el Program debemos deshabilitarlo
    y en los controladores, activar el tracking en las operaciones necesarias (modificaciones de datos)





